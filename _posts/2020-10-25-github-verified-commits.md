---
title: Verified commits in GitHub
author: Andrew Campbell
date: 2020-10-25
categories: []
tags: [GitHub, VSCode]
pin: false
---

# Verified commits in Github

Want to see that sweet **Verified** status on your GitHub commit history? This guide walks through how to setup and configure everything needed on a Windows system!

## Install GnuPG (GPG)

I'm a big fan of leveraging [Chocolatey](https://chocolatey.org) for package management on Windows. It makes things really easy to find and install software, and keep things up to date.

If you dont have Chocolatey already installed, head over to [https://chocolatey.org/install](https://chocolatey.org/install) and follow the instructions.

Install GnuPG with Chocolatey by opening an elevated PowerShell prompt and running the following:

```powershell
choco install gnupg
```

If you prefer to install GnuPG manually you can download it here: [https://www.gnupg.org/download/index.html](https://www.gnupg.org/download/index.html)

## Generate a GPG key pair

Run the following command to start the wizard to generate your first GPG key:

```powershell
gpg --full-generate-key
```

When prompted for GPG options provide the following:

| Prompt | Response |
| --- | --- |
| Please select what kind of key you want: | `(1) RSA and RSA (default)` |
| What keysize do you want: | `4096` |
| Please specify how long the key should be valid: | `1y` |
| Real name: | _your name_ |
| Email address: | _your email address_ |
| Comment: | `GitHub Verification` |

You will be prompted for a passphrase to secure your key. Generate a nice secure password with something like [LastPass](https://www.lastpass.com) to use.

You can confirm your key was generated by running:

```powershell
gpg --list-keys
```

## Configure git to use your signing key

We'll need to provide git with the id of the GPG key to use for signing commits. The output from `gpg --list-keys` will contain the id.

![gpg-key-id](/assets/img/gh-verified/gpg-key-id.png)

Configure git to sign all commits using this id:

```powershell
git config --global user.signingkey 50DB2A62E89EE4CFC5B4B9AE241F81E6BE8BABEB
```

> On Windows I've found that I also need to provide git with the filesystem path to the gpg executable. Without this option I've received messages from git such as `gpg: signing failed: No secret key`. Configure git with this option (you may need to adjust your filesystem path to gpg.exe):

```powershell
git config --global gpg.program "C:\Program Files (x86)\GnuPG\bin\gpg.exe"
```

## Add your public key to GitHub

We need to provide GitHub with the public key of the PGP key pair we generated. Run the following command to export the public key:

```powershell
gpg --armor --export 50DB2A62E89EE4CFC5B4B9AE241F81E6BE8BABEB
```

Copy all of the text including the `BEGIN PGP PUBLIC KEY` and `END PGP PUBLIC KEY` lines.

On [GitHub](https://github.com) navigate to your account `Settings` and `SSH and GPG keys`. Click `New GPG Key`, paste your public key text in the text box, and click `Add GPG` key. You should now see the key stored in your GitHub account.

![gh-key-ss](/assets/img/gh-verified/gpg-key-ss.png)

## Signing commits

You should be all setup to sign commits now. When using `git` from a shell you need to add the `-S` option to indicate the commit should be signed with gpg:

```powershell
git commit -S -m "this commit is signed"
```

Git can also be configured to automatically sign all commits. With this option configured your commits from VSCode will also be signed.

```powershell
git config --global commit.gpgsign true
```

Test out making a new commit and push to a GitHub repo, goto `Code` and `commits` and you should see the wonderful, green **Verified** badge!

![gh-verified](/assets/img/gh-verified/gh-verified.png)